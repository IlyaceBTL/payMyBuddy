<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}"/>
</head>
<body>
<nav class="header-navigation">
    <div class="logo">Pay My Buddy</div>
    <div class="items">
        <a th:href="@{/dashboard}" class="transferer">Transférer</a>
        <a th:href="@{/profile}" class="profil">Profil</a>
        <a th:href="@{/relation}" class="ajouter-relation">Ajouter relation</a>
        <form id="logoutForm" th:action="@{/logout}" method="post" style="display:inline;">
            <a href="#" class="nav-link" onclick="document.getElementById('logoutForm').submit(); return false;">Se déconnecter</a>
        </form>
    </div>
</nav>

<form class="transfer-zone" method="post" th:action="@{/transfer}">
    <label>
        <select class="dropdown-contact" name="contactEmail" required>
            <option value="" disabled th:selected="${contactEmail == null}">Sélectionner un contact</option>
            <option th:each="contact : ${contacts}" th:value="${contact.email}" th:text="${contact.fullName}"></option>
        </select>
    </label>
    <label>
        <input type="number" class="input-montant" name="amount" placeholder="Montant" min="1" step="0.01" required>
    </label>
    <label>
        <input type="text" class="input-description" name="description" placeholder="Description" maxlength="255" required>
    </label>
    <button class="button-transfer" type="submit">
        <span>Payer</span>
    </button>
</form>

<div class="table">
    <h2 class="title">Mes transactions</h2>
    <div class="table-header">
        <div class="relations">Relations</div>
        <div class="description">Description</div>
        <div class="montant">Montant</div>
    </div>
    <div class="list">
        <div class="transaction" th:each="transaction : ${transactions}">
            <div class="contact" th:text="${transaction.contactName}"></div>
            <div class="desc" th:text="${transaction.description}"></div>
            <div class="amount" th:text="${#strings.concat(transaction.amount, ' €')}"></div>
        </div>
        <div th:if="${#lists.isEmpty(transactions)}" style="padding: 24px; color: #888;">
            Aucune transaction à afficher.
        </div>
    </div>
</div>
</body>
</html>
